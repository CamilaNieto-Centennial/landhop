{% extends "landhop/layout2.html" %}
{% load static %}

{% block body %}


    <div class="container divSectionNormal" id="sections">
        <div class="row align-items-center">
            <div class="col-12">
                <h2 class="subtitles text-center">{{titleCity}}</h2>
                <hr class="submainHr">
            </div>
        </div>
        <div class="row align-items-center">
            <div class="col-12 col-md-12 col-sm-12 col-xs-12 col-lg-12 subContents" style="margin-bottom: 1em;">
                <!--<div class="container text-center">-->
                <div class="row">
                    <div class="col-12">
                        <img src="{{city.photo}}" alt="" style="width: 100%; padding-bottom: 1em;">
                    </div>
                </div>
                <p>{{city.description}}</p>
                <!--</div>-->
                <h2>Sights in {{titleCity}}</h2>
                
                
                <div class="container text-center">
                    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                        {% if sights %}
                            {% for sight in sights %}
                                <div class="col">
                                    <div class="card h-100 sight1">
                                        <img src="{{sight.photo}}" class="card-img-top" alt="{{sight.title}}">
                                        <div class="card-body">
                                            <h5 class="card-title"><strong>{{sight.title}}</strong></h5>
                                            <div class="stars-outer">
                                                <div class="stars-inner"></div>
                                            </div>
                                            <span class="number-rating"></span>
                                            <p class="card-text shortDescription">{{sight.description}}</p>
                                            <a class="btn btn-primary" href="/sight/{{ sight.title }}" role="button">VIEW DETAILS</a>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <div class="col text-center">
                                <h5 class="bigMarginBotton"><strong>No sights available.</strong></h5>
                            </div>
                        {% endif %}
                        <!--<div class="col">
                            <div class="card h-100 sight2">
                                <img src="{% static 'landhop/landscape5.jpg' %}" class="card-img-top" alt="Sight 2">
                                <div class="card-body">
                                    <h5 class="card-title"><strong>Sight 2</strong></h5>
                                    <div class="stars-outer">
                                        <div class="stars-inner"></div>
                                    </div>
                                    <span class="number-rating"></span>
                                    <p class="card-text">This is a short card.</p>
                                    <a class="btn btn-primary" href="{% url 'sight' %}" role="button">VIEW DETAILS</a>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card h-100 sight3">
                                <img src="{% static 'landhop/landscape5.jpg' %}" class="card-img-top" alt="Sight 3">
                                <div class="card-body">
                                    <h5 class="card-title"><strong>Sight 3</strong></h5>
                                    <div class="stars-outer">
                                        <div class="stars-inner"></div>
                                    </div>
                                    <span class="number-rating"></span>
                                    <p class="card-text">This is a short card.</p>
                                    <a class="btn btn-primary" href="{% url 'sight' %}" role="button">VIEW DETAILS</a>
                                </div>
                            </div>
                        </div>-->
                    </div>
                </div>
            </div>
        </div>
    </div>



{% endblock %}

{% block script %}
    <script>
        // Initial ratings
        const ratings = {
            sight1: 4.7,
            sight2: 3.5,
            sight3: 5.0
        }

        // Total Stars
        const starsTotal = 5;

        // Get ratings
        function getRatings() {
            for (let rating in ratings) {
                //console.log(ratings[rating])
                // Get percentage
                const starPercentage = (ratings[rating] / starsTotal) * 100;
                //console.log(starPercentage)

                // Round to nearest 10
                const starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`
                console.log(starPercentageRounded)

                // Set width of stars-inner to percentage
                document.querySelector(`.${rating} .stars-inner`).style.width=starPercentageRounded;

                // Add number rating
                document.querySelector(`.${rating} .number-rating`).innerHTML=ratings[rating].toFixed(1)
            }
            
        }

        //Run getRatings when DOM loads
        document.addEventListener('DOMContentLoaded', getRatings)

    </script>
{% endblock %}